{% extends 'partials/base.html' %}
{% load static %}
{% load crispy_forms_tags %}


{% block main %}

<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
  
  <div class="container my-5">
  <h2 class="mb-4">Customers</h2>

  <!-- Button to open Add Customer Form -->
  <button class="btn btn-primary mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#customerForm" aria-expanded="false">
    Add Customer
  </button>

  <!-- Add/Edit Customer Form -->
  <div class="collapse" id="customerForm">
    <div class="card card-body mb-4">

     <form method="POST" >
        {% csrf_token %}
        <div class="row g-3">
          <div class="col-md-3">
            <label for="code" class="form-label">Code</label>
            <input type="text" class="form-control" id="code" name="code" required>
          </div>
          <div class="col-md-4">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" id="name" name="name" required>
          </div>
          <div class="col-md-3">
            <label for="gst" class="form-label">GST</label>
            <input type="text" class="form-control" id="gst" name="gst">
          </div>
          <div class="col-md-3">
            <label for="phone" class="form-label">Phone</label>
            <input type="text" class="form-control" id="phone" name="phone">
          </div>
          <div class="col-md-4">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" name="email">
          </div>
          <div class="col-md-6">
            <label for="address_bill_to" class="form-label">Bill To Address</label>
            <textarea class="form-control" id="address_bill_to" name="address_bill_to" rows="2"></textarea>
          </div>
          <div class="col-md-6">
            <label for="address_ship_to" class="form-label">Ship To Address</label>
            <textarea class="form-control" id="address_ship_to" name="address_ship_to" rows="2"></textarea>
          </div>
          <div class="col-md-3">
            <label for="is_within_state" class="form-label">Within State?</label>
            <select class="form-select" id="is_within_state" name="is_within_state">
              <option value="True" selected>Yes</option>
              <option value="False">No</option>
            </select>
          </div>
          <div class="col-md-3">
            <label for="price_list_tag" class="form-label">Price List Tag</label>
            <input type="text" class="form-control" id="price_list_tag" name="price_list_tag">
          </div>
          <div class="col-md-3">
            <label for="default_delivery_transport" class="form-label">Delivery Transport</label>
            <input type="text" class="form-control" id="default_delivery_transport" name="default_delivery_transport">
          </div>
          <div class="col-md-3">
            <label for="default_delivery_location" class="form-label">Delivery Location</label>
            <input type="text" class="form-control" id="default_delivery_location" name="default_delivery_location">
          </div>
        </div>
        <button type="submit" class="btn btn-success mt-3">Save Customer</button>
      </form>
    </div>
  </div>

  <!-- Customer List Table -->
  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr>
          <th>Code</th>
          <th>Name</th>
          <th>GST</th>
          <th>Phone</th>
          <th>Email</th>
          <th>Bill To</th>
          <th>Ship To</th>
          <th>Within State</th>
          <th>Price List</th>
          <th>Transport</th>
          <th>Delivery Location</th>
          <th>Created</th>
          <th>Updated</th>
        </tr>
      </thead>
      <tbody>
        {% for customer in customers %}
        <tr>
          <td>{{ customer.code }}</td>
          <td>{{ customer.name }}</td>
          <td>{{ customer.gst }}</td>
          <td>{{ customer.phone }}</td>
          <td>{{ customer.email }}</td>
          <td>{{ customer.address_bill_to }}</td>
          <td>{{ customer.address_ship_to }}</td>
          <td>{{ customer.is_within_state|yesno:"Yes,No" }}</td>
          <td>{{ customer.price_list_tag }}</td>
          <td>{{ customer.default_delivery_transport }}</td>
          <td>{{ customer.default_delivery_location }}</td>
          <td>{{ customer.created_at|date:"Y-m-d H:i" }}</td>
          <td>{{ customer.updated_at|date:"Y-m-d H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="13" class="text-center">No customers found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>


 </main> 

{% endblock %}